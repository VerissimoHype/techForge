// ---------- 1. Sistema de Tarefas e Projetos ----------

abstract class TaskManager {
  abstract addTask(task: string): void;
  abstract listTasks(): string[];
}

class Project extends TaskManager {
  private tasks: Set<string>;

  constructor() {
    super();
    this.tasks = new Set();
  }

  addTask(task: string): void {
    this.tasks.add(task);
  }

  listTasks(): string[] {
    return Array.from(this.tasks);
  }
}

class DailyTasks extends TaskManager {
  private dailyTasks: Set<string>;

  constructor() {
    super();
    this.dailyTasks = new Set();
  }

  addTask(task: string): void {
    this.dailyTasks.add(task);
  }

  listTasks(): string[] {
    return Array.from(this.dailyTasks);
  }
}

// ---------- 2. Inventário de Itens ----------

abstract class Inventory {
  abstract addItem(item: string, quantity: number): void;
  abstract removeItem(item: string): void;
  abstract getInventory(): Record<string, number>;
}

class WarehouseInventory extends Inventory {
  private items: Record<string, number> = {};

  addItem(item: string, quantity: number): void {
    if (!this.items[item]) {
      this.items[item] = 0;
    }
    this.items[item] += quantity;
  }

  removeItem(item: string): void {
    delete this.items[item];
  }

  getInventory(): Record<string, number> {
    return this.items;
  }
}

class StoreInventory extends Inventory {
  private items: Record<string, number> = {};
  private readonly MAX_PER_ITEM = 10;

  addItem(item: string, quantity: number): void {
    if (!this.items[item]) {
      this.items[item] = 0;
    }

    this.items[item] += quantity;

    // Impedir ultrapassar o limite de 10
    if (this.items[item] > this.MAX_PER_ITEM) {
      this.items[item] = this.MAX_PER_ITEM;
    }
  }

  removeItem(item: string): void {
    delete this.items[item];
  }

  getInventory(): Record<string, number> {
    return this.items;
  }
}

// ---------- 3. Gerenciador de Favoritos ----------

abstract class FavoriteManager {
  abstract addFavorite(item: string): void;
  abstract getFavorites(): string[];
}

class MoviesFavoriteManager extends FavoriteManager {
  private movies: Set<string> = new Set();

  addFavorite(movie: string): void {
    this.movies.add(movie);
  }

  getFavorites(): string[] {
    return Array.from(this.movies).sort();
  }
}

class BooksFavoriteManager extends FavoriteManager {
  private books: string[] = [];

  addFavorite(book: string): void {
    // Adiciona no início
    this.books.unshift(book);
  }

  getFavorites(): string[] {
    return this.books;
  }
}

// ---------- 4. Sistema de Votação ----------

abstract class VoteSystem {
  abstract voteFor(candidate: string): void;
  abstract getResults(): object;
}

class Election extends VoteSystem {
  private votes: Record<string, number> = {};

  voteFor(candidate: string): void {
    if (!this.votes[candidate]) {
      this.votes[candidate] = 0;
    }
    this.votes[candidate]++;
  }

  getResults(): object {
    return this.votes;
  }
}

class Poll extends VoteSystem {
  private votes: Record<string, number> = {};

  voteFor(candidate: string): void {
    if (!this.votes[candidate]) {
      this.votes[candidate] = 0;
    }
    this.votes[candidate]++;
  }

  getResults(): object {
    return Object.entries(this.votes)
      .sort((a, b) => b[1] - a[1]) 
      .map(([candidate, votes]) => ({ candidate, votes }));
  }
}
